---
- name: create a 2nd subnet for router testing
  os_subnet:
    cloud: "{{ os_migrate_src_cloud }}"
    state: present
    network_name: osm_net
    name: router_subnet
    cidr: 192.168.10.0/24

- name: create osm_router
  os_router:
    cloud: "{{ os_migrate_src_cloud }}"
    name: osm_router
    state: present
    network: "{{ test_router_external_network|default('public') }}"
    interfaces:
      - net: osm_net
        subnet: osm_subnet
        portip: 192.168.0.10
      - net: osm_net
        subnet: router_subnet
        portip: 192.168.10.10
